<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/style.css" />

    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/function.js"></script>
    <title>ReadOnly</title>
  </head>
  <body>
    <div class="wrapper">
      <form class="form-signin" style="max-width: 800px;">
        <div class="imgcontainer">
          <img src="../imgs/logo.JPG" style="width: 200px; height:150px" />
        </div>
        <div style="display: flex; justify-content: center;">
          <button
            class="btn btn-danger"
            style="font-size: 15px; width: 100px;"
            onclick="goBack()"
            type="button"
          >
            Back
          </button>
          <button
            class="btn btn-primary"
            style="font-size: 15px; width: 100px;"
            onclick="Refresh()"
            type="button"
          >
            Refresh
          </button>
        </div>
        <hr />
        <div id="content"></div>
      </form>
    </div>

    <script>
      function goBack() {
        setTimeout(function() {
          //Update Local Storage Variable
          localStorage.setItem("UserIsValid", "1");
          //Redirect to HTML Page
          window.location.href = "home.html";
        }, 1000);
      }
      function GetArticles() {
        $("#content").empty();

        ArticletList = JSON.parse(localStorage.getItem("MyArticles"));

        $.each(ArticletList, function(i, k) {
          var row =
            '<div id="Article_' +
            i +
            '"><h3><strong>' +
            k.name +
            '</strong></h3><p>' +
            k.description +
            '</p><h5><strong>Author: </strong>' +
            k.author +
            '</h5><h5><strong>Fecha: </strong>' +
            k.date +
            '</h5><hr />';

          $("#content").append(row);
        });
      }

      function Refresh() {
        GetArticles();
      }

      $(function() {
        GetArticles();
      });
    </script>
  </body>
</html>
